
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>éŸ“æ–‡è©å½™çŸ¥è­˜åœ–è­œ</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <style>
        body {
            font-family: 'Malgun Gothic', Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }
        .header {
            text-align: center;
            margin-bottom: 20px;
        }
        .source {
            background: rgba(255,255,255,0.1);
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 20px;
            text-align: center;
        }
        .source a {
            color: #ffeb3b;
            text-decoration: none;
        }
        #graph-container {
            width: 100%;
            height: 80vh;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            position: relative;
            background: rgba(255,255,255,0.05);
        }
        .tooltip {
            position: absolute;
            text-align: center;
            padding: 15px;
            font: 14px sans-serif;
            background: rgba(0,0,0,0.9);
            border: 1px solid #fff;
            border-radius: 8px;
            pointer-events: none;
            color: white;
            max-width: 300px;
            z-index: 1000;
        }
        .tooltip .korean {
            font-size: 18px;
            font-weight: bold;
            color: #ffeb3b;
            margin-bottom: 5px;
        }
        .tooltip .chinese {
            font-size: 16px;
            color: #ff5722;
            margin-bottom: 8px;
        }
        .tooltip .definition {
            margin-bottom: 8px;
            font-size: 12px;
        }
        .tooltip .example {
            font-style: italic;
            font-size: 11px;
            color: #ccc;
        }
        .controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
        .controls button {
            margin: 2px;
            padding: 5px 10px;
            background: #2196F3;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
        .controls button:hover {
            background: #1976D2;
        }
        .back-button {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(0,0,0,0.7);
            padding: 10px;
            border-radius: 5px;
        }
        .back-button a {
            color: #ffeb3b;
            text-decoration: none;
            font-weight: bold;
        }
        .saved-indicator {
            position: absolute;
            top: -5px;
            right: -5px;
            background: #ff6b6b;
            color: white;
            border-radius: 50%;
            width: 20px;
            height: 20px;
            font-size: 14px;
            display: flex;
            align-items: center;
            justify-content: center;
            pointer-events: none;
        }
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.9);
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            z-index: 10000;
            animation: slideIn 0.3s ease;
            border: 2px solid #4ecdc4;
        }
        @keyframes slideIn {
            from {
                transform: translateX(400px);
                opacity: 0;
            }
            to {
                transform: translateX(0);
                opacity: 1;
            }
        }
    </style>
</head>
<body>
    <div class="back-button">
        <a href="javascript:void(0)" id="homeLink" onclick="goHome()">â† è¿”å›é¦–é </a>
        <a href="javascript:void(0)" id="reviewLink" onclick="goToReview()" style="margin-left: 10px;">ğŸ“š æˆ‘çš„æ”¶è—</a>
    </div>

    <div class="header">
        <h1>ğŸ‡°ğŸ‡· éŸ“æ–‡è©å½™çŸ¥è­˜åœ–è­œ</h1>
        <p>äº’å‹•å¼è©å½™å­¸ç¿’ç¶²çµ¡ - é»æ“Šç¯€é»æŸ¥çœ‹è©³ç´°è³‡è¨Š</p>
    </div>

    <div class="source">
        <strong>è³‡æ–™ä¾†æº:</strong>
        <a href="https://www.yna.co.kr/view/AKR20251114042800530" target="_blank">https://www.yna.co.kr/view/AKR20251114042800530</a>
        <br>
        <strong>å…± 43 å€‹éŸ“æ–‡è©å½™</strong>
    </div>

    <div id="graph-container">
        <div class="controls">
            <button onclick="restartSimulation()">é‡æ–°æ’åˆ—</button>
            <button onclick="centerGraph()">å±…ä¸­é¡¯ç¤º</button>
        </div>
    </div>

    <script>
        // æª¢æ¸¬ç•¶å‰è·¯å¾‘,è‡ªå‹•é©æ‡‰ä»£ç†ç’°å¢ƒ
        function getBasePath() {
            const path = window.location.pathname;
            if (path.startsWith('/korean-app')) {
                return '/korean-app';
            }
            return '';
        }

        // å°èˆªå‡½æ•¸
        function goHome() {
            const protocol = window.location.protocol;
            const host = window.location.host;
            const homeUrl = `${protocol}//${host}/dashboard`;
            console.log('Current URL:', window.location.href);
            console.log('Navigating to dashboard:', homeUrl);
            window.location.href = homeUrl;
        }

        function goToReview() {
            const basePath = getBasePath();
            const reviewUrl = basePath + '/review';
            console.log('Navigating to review:', reviewUrl);
            window.location.href = reviewUrl;
        }

        const nodes = [{"id": 0, "korean": "ê°„", "chinese": "è‚", "definition": "äººæˆ–åŠ¨ç‰©çš„è‚è„", "example_korean": "ê°„ì´ ì•ˆ ì¢‹ì•„ìš”.", "example_chinese": "æˆ‘çš„è‚ä¸å¥½ã€‚", "group": 0}, {"id": 1, "korean": "ìˆ˜ì¹˜", "chinese": "æ•°å€¼", "definition": "è¡¨ç¤ºæ•°é‡çš„å€¼ï¼ŒæŒ‡æ ‡", "example_korean": "í˜ˆì•• ìˆ˜ì¹˜ê°€ ë†’ì•„ìš”.", "example_chinese": "è¡€å‹æ•°å€¼å¾ˆé«˜ã€‚", "group": 1}, {"id": 2, "korean": "ì •ìƒ", "chinese": "æ­£å¸¸", "definition": "æ²¡æœ‰å¼‚å¸¸çš„çŠ¶æ€", "example_korean": "ì²´ì˜¨ì´ ì •ìƒì´ì—ìš”.", "example_chinese": "ä½“æ¸©æ˜¯æ­£å¸¸çš„ã€‚", "group": 2}, {"id": 3, "korean": "ì´ì–´ë„", "chinese": "å³ä½¿ï¼Œå°±ç®—", "definition": "è¡¨ç¤ºè®©æ­¥çš„è¿æ¥è¯å°¾", "example_korean": "ë¹„ê°€ ì™€ë„ ê°ˆ ê±°ì˜ˆìš”.", "example_chinese": "å³ä½¿ä¸‹é›¨æˆ‘ä¹Ÿè¦å»ã€‚", "group": 3}, {"id": 4, "korean": "Bí˜•", "chinese": "Bå‹", "definition": "Bå‹ï¼ˆè¡€å‹ã€è‚ç‚ç­‰ï¼‰", "example_korean": "Bí˜• ê°„ì—¼ ì˜ˆë°© ì ‘ì¢…ì„ ë°›ì•˜ì–´ìš”.", "example_chinese": "æˆ‘æ¥ç§äº†Bå‹è‚ç‚ç–«è‹—ã€‚", "group": 4}, {"id": 5, "korean": "ê°„ì—¼", "chinese": "è‚ç‚", "definition": "è‚è„ç‚ç—‡", "example_korean": "ê°„ì—¼ì— ê±¸ë¦¬ì§€ ì•Šë„ë¡ ì¡°ì‹¬í•˜ì„¸ìš”.", "example_chinese": "å°å¿ƒä¸è¦å¾—è‚ç‚ã€‚", "group": 0}, {"id": 6, "korean": "ë°”ì´ëŸ¬ìŠ¤", "chinese": "ç—…æ¯’", "definition": "å¼•èµ·ç–¾ç—…çš„å¾®ç”Ÿç‰©", "example_korean": "ë°”ì´ëŸ¬ìŠ¤ ê°ì—¼ì„ ì˜ˆë°©í•´ì•¼ í•´ìš”.", "example_chinese": "éœ€è¦é¢„é˜²ç—…æ¯’æ„ŸæŸ“ã€‚", "group": 1}, {"id": 7, "korean": "ë§ë‹¤ë©´", "chinese": "å¦‚æœå¤šçš„è¯", "definition": "è¡¨ç¤ºå‡è®¾çš„æ¡ä»¶", "example_korean": "ëˆì´ ë§ë‹¤ë©´ ì„¸ê³„ ì—¬í–‰ì„ í•˜ê³  ì‹¶ì–´ìš”.", "example_chinese": "å¦‚æœæœ‰å¾ˆå¤šé’±ï¼Œæˆ‘æƒ³å»ä¸–ç•Œæ—…è¡Œã€‚", "group": 2}, {"id": 8, "korean": "ì¡°ê¸°", "chinese": "æ—©æœŸ", "definition": "äº‹æƒ…å‘ç”Ÿçš„åˆæœŸ", "example_korean": "ì¡°ê¸° ë°œê²¬ì´ ì¤‘ìš”í•´ìš”.", "example_chinese": "æ—©æœŸå‘ç°å¾ˆé‡è¦ã€‚", "group": 3}, {"id": 9, "korean": "ì¹˜ë£Œ", "chinese": "æ²»ç–—", "definition": "ä¸ºäº†æ¢å¤å¥åº·è€Œé‡‡å–çš„æªæ–½", "example_korean": "ì¹˜ë£Œë¥¼ ë°›ì•„ì•¼ í•´ìš”.", "example_chinese": "éœ€è¦æ¥å—æ²»ç–—ã€‚", "group": 4}, {"id": 10, "korean": "í•´ì•¼", "chinese": "å¿…é¡»ï¼Œåº”è¯¥", "definition": "è¡¨ç¤ºä¹‰åŠ¡æˆ–å¿…è¦æ€§çš„è¡¨è¾¾æ–¹å¼", "example_korean": "ìˆ™ì œë¥¼ í•´ì•¼ í•´ìš”.", "example_chinese": "æˆ‘å¿…é¡»åšä½œä¸šã€‚", "group": 0}, {"id": 11, "korean": "êµ­ê°€", "chinese": "å›½å®¶", "definition": "æ‹¥æœ‰ç‰¹å®šé¢†åœŸå’Œä¸»æƒçš„æ”¿æ²»å…±åŒä½“", "example_korean": "ìš°ë¦¬ë‚˜ë¼ëŠ” ëŒ€í•œë¯¼êµ­ì…ë‹ˆë‹¤.", "example_chinese": "æˆ‘ä»¬çš„å›½å®¶æ˜¯å¤§éŸ©æ°‘å›½ã€‚", "group": 1}, {"id": 12, "korean": "ê¸°ê°„", "chinese": "æœŸé—´", "definition": "ä¸€æ®µæ—¶é—´", "example_korean": "ë°©í•™ ê¸°ê°„ ë™ì•ˆ ì—¬í–‰ì„ ê°”ì–´ìš”.", "example_chinese": "æ”¾å‡æœŸé—´å»æ—…è¡Œäº†ã€‚", "group": 2}, {"id": 13, "korean": "ë‰´ìŠ¤", "chinese": "æ–°é—»", "definition": "æŠ¥é“æ–°è¿‘å‘ç”Ÿçš„äº‹æƒ…çš„ä¿¡æ¯", "example_korean": "ì˜¤ëŠ˜ ë‰´ìŠ¤ì—ì„œ ë´¤ì–´ìš”.", "example_chinese": "æˆ‘ä»Šå¤©åœ¨æ–°é—»ä¸Šçœ‹åˆ°äº†ã€‚", "group": 3}, {"id": 14, "korean": "í†µì‹ ì‚¬", "chinese": "é€šè®¯ç¤¾", "definition": "æä¾›æ–°é—»å’Œä¿¡æ¯çš„æœºæ„", "example_korean": "ì—°í•©ë‰´ìŠ¤ëŠ” í•œêµ­ì˜ ëŒ€í‘œì ì¸ í†µì‹ ì‚¬ì…ë‹ˆë‹¤.", "example_chinese": "éŸ©è”ç¤¾æ˜¯éŸ©å›½å…·æœ‰ä»£è¡¨æ€§çš„é€šè®¯ç¤¾ã€‚", "group": 4}, {"id": 15, "korean": "ìµœì‹ ", "chinese": "æœ€æ–°", "definition": "æœ€è¿‘çš„ï¼Œæœ€æ–°çš„", "example_korean": "ìµœì‹  íœ´ëŒ€í°ì„ ìƒ€ì–´ìš”.", "example_chinese": "æˆ‘ä¹°äº†æœ€æ–°æ¬¾çš„æ‰‹æœºã€‚", "group": 0}, {"id": 16, "korean": "ì •ì¹˜", "chinese": "æ”¿æ²»", "definition": "å›½å®¶æˆ–ç¤¾ä¼šç®¡ç†æ´»åŠ¨", "example_korean": "ì •ì¹˜ì— ê´€ì‹¬ì´ ë§ì•„ìš”.", "example_chinese": "æˆ‘å¯¹æ”¿æ²»å¾ˆæ„Ÿå…´è¶£ã€‚", "group": 1}, {"id": 17, "korean": "ë¶í•œ", "chinese": "æœé²œ", "definition": "æœé²œæ°‘ä¸»ä¸»ä¹‰äººæ°‘å…±å’Œå›½", "example_korean": "ë¶í•œ ê´€ë ¨ ë‰´ìŠ¤ë¥¼ ìì£¼ ë´ìš”.", "example_chinese": "æˆ‘ç»å¸¸çœ‹å…³äºæœé²œçš„æ–°é—»ã€‚", "group": 2}, {"id": 18, "korean": "ê²½ì œ", "chinese": "ç»æµ", "definition": "ç”Ÿäº§ã€åˆ†é…ã€æ¶ˆè´¹ç­‰ç»æµæ´»åŠ¨", "example_korean": "ê²½ì œ ìƒí™©ì´ ì•ˆ ì¢‹ì•„ìš”.", "example_chinese": "ç»æµæƒ…å†µä¸å¥½ã€‚", "group": 3}, {"id": 19, "korean": "ì‚°ì—…", "chinese": "äº§ä¸š", "definition": "å¤§è§„æ¨¡ç”Ÿäº§çš„è¡Œä¸š", "example_korean": "ìë™ì°¨ ì‚°ì—…ì´ ë°œì „í•˜ê³  ìˆì–´ìš”.", "example_chinese": "æ±½è½¦äº§ä¸šæ­£åœ¨å‘å±•ã€‚", "group": 4}, {"id": 20, "korean": "ì‚¬íšŒ", "chinese": "ç¤¾ä¼š", "definition": "ç”±äººç»„æˆçš„é›†ä½“", "example_korean": "ì‚¬íšŒ ë¬¸ì œì— ëŒ€í•´ ìƒê°í•´ ë´ì•¼ í•´ìš”.", "example_chinese": "éœ€è¦è€ƒè™‘ç¤¾ä¼šé—®é¢˜ã€‚", "group": 0}, {"id": 21, "korean": "ì „êµ­", "chinese": "å…¨å›½", "definition": "æ•´ä¸ªå›½å®¶", "example_korean": "ì „êµ­ì ìœ¼ë¡œ ë¹„ê°€ ì™”ì–´ìš”.", "example_chinese": "å…¨å›½éƒ½ä¸‹é›¨äº†ã€‚", "group": 1}, {"id": 22, "korean": "ì„¸ê³„", "chinese": "ä¸–ç•Œ", "definition": "åœ°çƒä¸Šçš„æ‰€æœ‰å›½å®¶å’Œåœ°åŒº", "example_korean": "ì„¸ê³„ ì—¬í–‰ì„ ê°€ê³  ì‹¶ì–´ìš”.", "example_chinese": "æˆ‘æƒ³å»ä¸–ç•Œæ—…è¡Œã€‚", "group": 2}, {"id": 23, "korean": "ë¬¸í™”", "chinese": "æ–‡åŒ–", "definition": "äººç±»åˆ›é€ çš„æ‰€æœ‰ç²¾ç¥å’Œç‰©è´¨è´¢å¯Œ", "example_korean": "í•œêµ­ ë¬¸í™”ì— ê´€ì‹¬ì´ ë§ì•„ìš”.", "example_chinese": "æˆ‘å¯¹éŸ©å›½æ–‡åŒ–å¾ˆæ„Ÿå…´è¶£ã€‚", "group": 3}, {"id": 24, "korean": "ê±´ê°•", "chinese": "å¥åº·", "definition": "èº«ä½“ã€ç²¾ç¥å’Œç¤¾ä¼šé€‚åº”çš„è‰¯å¥½çŠ¶æ€", "example_korean": "ê±´ê°•ì´ ì œì¼ ì¤‘ìš”í•´ìš”.", "example_chinese": "å¥åº·æœ€é‡è¦ã€‚", "group": 4}, {"id": 25, "korean": "ì—°ì˜ˆ", "chinese": "æ¼”è‰º", "definition": "ç”µå½±ã€ç”µè§†ã€éŸ³ä¹ç­‰å¨±ä¹æ´»åŠ¨", "example_korean": "ì—°ì˜ˆì¸ë“¤ì´ ë§ì´ ì¶œì—°í–ˆì–´ìš”.", "example_chinese": "å¾ˆå¤šè‰ºäººå‡ºæ¼”äº†ã€‚", "group": 0}, {"id": 26, "korean": "ìŠ¤í¬ì¸ ", "chinese": "ä½“è‚²", "definition": "ä½“è‚²è¿åŠ¨", "example_korean": "ìŠ¤í¬ì¸ ë¥¼ ì¦ê²¨ ë´ìš”.", "example_chinese": "æˆ‘å–œæ¬¢çœ‹ä½“è‚²æ¯”èµ›ã€‚", "group": 1}, {"id": 27, "korean": "ì œë³´", "chinese": "ä¸¾æŠ¥", "definition": "å‘æœ‰å…³éƒ¨é—¨æŠ¥å‘Šä¸æ³•è¡Œä¸º", "example_korean": "ë¹„ë¦¬ ì œë³´ë¥¼ ë°›ì•˜ì–´ìš”.", "example_chinese": "æ”¶åˆ°äº†ä¸æ­£ä¹‹é£çš„ä¸¾æŠ¥ã€‚", "group": 2}, {"id": 28, "korean": "ê²€ìƒ‰ì°½", "chinese": "æœç´¢æ ", "definition": "ç”¨äºè¾“å…¥æœç´¢å…³é”®è¯çš„è¾“å…¥æ¡†", "example_korean": "ê²€ìƒ‰ì°½ì— ê²€ìƒ‰ì–´ë¥¼ ì…ë ¥í•˜ì„¸ìš”.", "example_chinese": "è¯·åœ¨æœç´¢æ è¾“å…¥æœç´¢è¯ã€‚", "group": 3}, {"id": 29, "korean": "ìˆ˜ì¹˜", "chinese": "æ•°å€¼", "definition": "è¡¨ç¤ºæ•°é‡çš„å€¼ï¼ŒæŒ‡æ ‡", "example_korean": "í˜ˆì•¡ ê²€ì‚¬ ìˆ˜ì¹˜ê°€ ë†’ê²Œ ë‚˜ì™”ì–´ìš”.", "example_chinese": "è¡€æ¶²æ£€æŸ¥æ•°å€¼å¾ˆé«˜ã€‚", "group": 4}, {"id": 30, "korean": "í™˜ì", "chinese": "æ‚£è€…", "definition": "ç”Ÿç—…çš„äºº", "example_korean": "í™˜ìë¥¼ ê°„í˜¸í•´ì•¼ í•´ìš”.", "example_chinese": "éœ€è¦ç…§é¡¾æ‚£è€…ã€‚", "group": 0}, {"id": 31, "korean": "ê²°ê³¼", "chinese": "ç»“æœ", "definition": "æœ€ç»ˆçš„ç»“å±€", "example_korean": "ë…¸ë ¥ì˜ ê²°ê³¼ê°€ ë‚˜íƒ€ë‚¬ì–´ìš”.", "example_chinese": "åŠªåŠ›çš„ç»“æœæ˜¾ç°å‡ºæ¥äº†ã€‚", "group": 1}, {"id": 32, "korean": "ì—°êµ¬", "chinese": "ç ”ç©¶", "definition": "æ·±å…¥è°ƒæŸ¥å’Œåˆ†æ", "example_korean": "ìƒˆë¡œìš´ ì—°êµ¬ê°€ ì§„í–‰ ì¤‘ì´ì—ìš”.", "example_chinese": "æ­£åœ¨è¿›è¡Œæ–°çš„ç ”ç©¶ã€‚", "group": 2}, {"id": 33, "korean": "ì˜ë¯¸", "chinese": "æ„ä¹‰", "definition": "å­˜åœ¨çš„ç†ç”±æˆ–ä»·å€¼", "example_korean": "ì´ ë‹¨ì–´ì˜ ì˜ë¯¸ë¥¼ ëª¨ë¥´ê² ì–´ìš”.", "example_chinese": "æˆ‘ä¸çŸ¥é“è¿™ä¸ªå•è¯çš„æ„ä¹‰ã€‚", "group": 3}, {"id": 34, "korean": "í˜ˆì•¡", "chinese": "è¡€æ¶²", "definition": "äººä½“å†…å¾ªç¯çš„æ¶²ä½“", "example_korean": "í—Œí˜ˆì„ í•˜ëŸ¬ ê°”ì–´ìš”.", "example_chinese": "æˆ‘å»çŒ®è¡€äº†ã€‚", "group": 4}, {"id": 35, "korean": "ì†", "chinese": "é‡Œé¢", "definition": "å†…éƒ¨ç©ºé—´", "example_korean": "ê°€ë°© ì†ì— ì±…ì´ ìˆì–´ìš”.", "example_chinese": "åŒ…é‡Œæœ‰ä¹¦ã€‚", "group": 0}, {"id": 36, "korean": "íš¨ê³¼", "chinese": "æ•ˆæœ", "definition": "äº§ç”Ÿçš„è‰¯å¥½å½±å“", "example_korean": "ì•½ì˜ íš¨ê³¼ê°€ ë‚˜íƒ€ë‚¬ì–´ìš”.", "example_chinese": "è¯æ•ˆæ˜¾ç°å‡ºæ¥äº†ã€‚", "group": 1}, {"id": 37, "korean": "ìœ ë³‘ë¥ ", "chinese": "æ‚£ç—…ç‡", "definition": "ç‰¹å®šæ—¶é—´å†…ç‰¹å®šäººç¾¤ä¸­æ‚£ç—…äººæ•°çš„æ¯”ä¾‹", "example_korean": "ë§Œì„± ì§ˆí™˜ì˜ ìœ ë³‘ë¥ ì´ ë†’ì•„ìš”.", "example_chinese": "æ…¢æ€§ç–¾ç—…çš„æ‚£ç—…ç‡å¾ˆé«˜ã€‚", "group": 2}, {"id": 38, "korean": "ë¹„ìœ¨", "chinese": "æ¯”ä¾‹", "definition": "éƒ¨åˆ†å æ•´ä½“çš„æ¯”é‡", "example_korean": "ì„±ê³µ ë¹„ìœ¨ì´ ë‚®ì•„ìš”.", "example_chinese": "æˆåŠŸçš„æ¯”ä¾‹å¾ˆä½ã€‚", "group": 3}, {"id": 39, "korean": "ì›ì¸", "chinese": "åŸå› ", "definition": "å¼•èµ·æŸç§ç»“æœçš„å› ç´ ", "example_korean": "ì‚¬ê³ ì˜ ì›ì¸ì„ ì¡°ì‚¬í•˜ê³  ìˆì–´ìš”.", "example_chinese": "æ­£åœ¨è°ƒæŸ¥äº‹æ•…çš„åŸå› ã€‚", "group": 4}, {"id": 40, "korean": "ê¸°ì¤€", "chinese": "æ ‡å‡†", "definition": "è¡¡é‡äº‹ç‰©çš„å‡†åˆ™", "example_korean": "í‰ê°€ ê¸°ì¤€ì´ ì—„ê²©í•´ìš”.", "example_chinese": "è¯„ä¼°æ ‡å‡†å¾ˆä¸¥æ ¼ã€‚", "group": 0}, {"id": 41, "korean": "í•„ìš”í•˜ë‹¤", "chinese": "éœ€è¦", "definition": "å¿…é¡»å…·å¤‡æˆ–ä¸å¯ç¼ºå°‘", "example_korean": "ë„ì›€ì´ í•„ìš”í•˜ë©´ ë§í•˜ì„¸ìš”.", "example_chinese": "å¦‚æœéœ€è¦å¸®åŠ©è¯·è¯´ã€‚", "group": 1}, {"id": 42, "korean": "ê±´ë³´", "chinese": "åŒ»ä¿", "definition": "åŒ»ç–—ä¿é™©", "example_korean": "ê±´ë³´ í˜œíƒì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.", "example_chinese": "å¯ä»¥äº«å—åŒ»ä¿ä¼˜æƒ ã€‚", "group": 2}];
        const links = [{"source": 0, "target": 38, "value": 1}, {"source": 0, "target": 30, "value": 3}, {"source": 0, "target": 15, "value": 2}, {"source": 1, "target": 30, "value": 1}, {"source": 1, "target": 41, "value": 2}, {"source": 1, "target": 9, "value": 2}, {"source": 2, "target": 22, "value": 1}, {"source": 2, "target": 0, "value": 1}, {"source": 2, "target": 15, "value": 2}, {"source": 3, "target": 5, "value": 3}, {"source": 3, "target": 8, "value": 3}, {"source": 3, "target": 38, "value": 1}, {"source": 4, "target": 12, "value": 3}, {"source": 4, "target": 26, "value": 3}, {"source": 4, "target": 41, "value": 2}, {"source": 5, "target": 23, "value": 2}, {"source": 5, "target": 24, "value": 1}, {"source": 5, "target": 26, "value": 2}, {"source": 6, "target": 1, "value": 1}, {"source": 6, "target": 15, "value": 1}, {"source": 6, "target": 4, "value": 1}, {"source": 7, "target": 30, "value": 1}, {"source": 7, "target": 35, "value": 1}, {"source": 8, "target": 23, "value": 1}, {"source": 8, "target": 19, "value": 1}, {"source": 8, "target": 0, "value": 3}, {"source": 9, "target": 40, "value": 3}, {"source": 9, "target": 29, "value": 3}, {"source": 10, "target": 25, "value": 3}, {"source": 10, "target": 1, "value": 3}, {"source": 10, "target": 2, "value": 1}, {"source": 11, "target": 27, "value": 1}, {"source": 11, "target": 31, "value": 2}, {"source": 11, "target": 7, "value": 1}, {"source": 12, "target": 35, "value": 1}, {"source": 12, "target": 19, "value": 3}, {"source": 12, "target": 25, "value": 3}, {"source": 13, "target": 19, "value": 2}, {"source": 13, "target": 41, "value": 1}, {"source": 14, "target": 1, "value": 2}, {"source": 14, "target": 31, "value": 1}, {"source": 14, "target": 34, "value": 3}, {"source": 15, "target": 26, "value": 2}, {"source": 15, "target": 10, "value": 2}, {"source": 15, "target": 5, "value": 2}, {"source": 16, "target": 18, "value": 2}, {"source": 16, "target": 7, "value": 3}, {"source": 16, "target": 42, "value": 1}, {"source": 17, "target": 27, "value": 3}, {"source": 17, "target": 36, "value": 3}, {"source": 17, "target": 9, "value": 1}, {"source": 18, "target": 35, "value": 2}, {"source": 18, "target": 26, "value": 3}, {"source": 18, "target": 12, "value": 2}, {"source": 19, "target": 41, "value": 2}, {"source": 19, "target": 13, "value": 3}, {"source": 19, "target": 11, "value": 1}, {"source": 20, "target": 34, "value": 2}, {"source": 20, "target": 38, "value": 2}, {"source": 20, "target": 0, "value": 1}, {"source": 21, "target": 2, "value": 1}, {"source": 21, "target": 6, "value": 1}, {"source": 21, "target": 20, "value": 3}, {"source": 22, "target": 33, "value": 1}, {"source": 22, "target": 38, "value": 1}, {"source": 22, "target": 1, "value": 2}, {"source": 23, "target": 29, "value": 2}, {"source": 23, "target": 37, "value": 2}, {"source": 23, "target": 36, "value": 1}, {"source": 24, "target": 39, "value": 1}, {"source": 24, "target": 37, "value": 3}, {"source": 24, "target": 17, "value": 1}, {"source": 25, "target": 21, "value": 2}, {"source": 25, "target": 35, "value": 2}, {"source": 25, "target": 40, "value": 3}, {"source": 26, "target": 33, "value": 3}, {"source": 26, "target": 29, "value": 2}, {"source": 26, "target": 25, "value": 3}, {"source": 27, "target": 37, "value": 2}, {"source": 27, "target": 2, "value": 1}, {"source": 27, "target": 28, "value": 1}, {"source": 28, "target": 10, "value": 2}, {"source": 28, "target": 9, "value": 3}, {"source": 28, "target": 36, "value": 2}, {"source": 29, "target": 12, "value": 1}, {"source": 29, "target": 8, "value": 2}, {"source": 29, "target": 17, "value": 3}, {"source": 30, "target": 27, "value": 2}, {"source": 30, "target": 33, "value": 1}, {"source": 30, "target": 14, "value": 3}, {"source": 31, "target": 24, "value": 3}, {"source": 31, "target": 39, "value": 2}, {"source": 31, "target": 18, "value": 3}, {"source": 32, "target": 30, "value": 3}, {"source": 32, "target": 1, "value": 1}, {"source": 32, "target": 16, "value": 1}, {"source": 33, "target": 34, "value": 2}, {"source": 33, "target": 18, "value": 1}, {"source": 33, "target": 14, "value": 2}, {"source": 34, "target": 26, "value": 2}, {"source": 34, "target": 42, "value": 1}, {"source": 34, "target": 3, "value": 1}, {"source": 35, "target": 0, "value": 1}, {"source": 35, "target": 22, "value": 3}, {"source": 35, "target": 24, "value": 3}, {"source": 36, "target": 10, "value": 1}, {"source": 36, "target": 42, "value": 1}, {"source": 36, "target": 31, "value": 3}, {"source": 37, "target": 27, "value": 1}, {"source": 37, "target": 40, "value": 1}, {"source": 37, "target": 1, "value": 3}, {"source": 38, "target": 26, "value": 3}, {"source": 38, "target": 18, "value": 1}, {"source": 38, "target": 27, "value": 2}, {"source": 39, "target": 30, "value": 1}, {"source": 39, "target": 1, "value": 3}, {"source": 39, "target": 42, "value": 1}, {"source": 40, "target": 9, "value": 3}, {"source": 40, "target": 17, "value": 2}, {"source": 40, "target": 10, "value": 3}, {"source": 41, "target": 36, "value": 1}, {"source": 41, "target": 25, "value": 3}, {"source": 41, "target": 13, "value": 3}, {"source": 42, "target": 35, "value": 1}, {"source": 42, "target": 36, "value": 2}, {"source": 42, "target": 5, "value": 2}];

        const width = document.getElementById('graph-container').clientWidth;
        const height = document.getElementById('graph-container').clientHeight;

        const svg = d3.select("#graph-container")
            .append("svg")
            .attr("width", width)
            .attr("height", height);

        const g = svg.append("g");

        // æ·»åŠ ç¸®æ”¾åŠŸèƒ½
        const zoom = d3.zoom()
            .scaleExtent([0.1, 4])
            .on('zoom', function(event) {
                g.attr('transform', event.transform);
            });

        svg.call(zoom);

        // é¡è‰²æ¯”ä¾‹å°º
        const color = d3.scaleOrdinal()
            .domain([0, 1, 2, 3, 4])
            .range(['#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7']);

        // åŠ›æ¨¡æ“¬
        const simulation = d3.forceSimulation(nodes)
            .force("link", d3.forceLink(links).id(d => d.id).distance(100))
            .force("charge", d3.forceManyBody().strength(-400))
            .force("center", d3.forceCenter(width / 2, height / 2))
            .force("collision", d3.forceCollide().radius(40));

        // å‰µå»ºé€£æ¥ç·š
        const link = g.append("g")
            .selectAll("line")
            .data(links)
            .enter().append("line")
            .attr("stroke", "rgba(255,255,255,0.3)")
            .attr("stroke-width", d => Math.sqrt(d.value) * 2);

        // å‰µå»ºç¯€é»
        const node = g.append("g")
            .selectAll("g")
            .data(nodes)
            .enter().append("g")
            .call(d3.drag()
                .on("start", dragstarted)
                .on("drag", dragged)
                .on("end", dragended));

        // ç¯€é»åœ“åœˆ
        node.append("circle")
            .attr("r", 25)
            .attr("fill", d => color(d.group))
            .attr("stroke", "#fff")
            .attr("stroke-width", 3);

        // ç¯€é»æ–‡å­—ï¼ˆéŸ“æ–‡ï¼‰
        node.append("text")
            .text(d => d.korean)
            .attr("x", 0)
            .attr("y", 0)
            .attr("text-anchor", "middle")
            .attr("dominant-baseline", "middle")
            .attr("font-size", "12px")
            .attr("font-weight", "bold")
            .attr("fill", "white")
            .attr("pointer-events", "none");

        // ä¸­æ–‡ç¿»è­¯æ¨™ç±¤
        node.append("text")
            .text(d => d.chinese)
            .attr("x", 0)
            .attr("y", 35)
            .attr("text-anchor", "middle")
            .attr("font-size", "10px")
            .attr("fill", "#ffeb3b")
            .attr("pointer-events", "none");

        // å·¥å…·æç¤º
        const tooltip = d3.select("body").append("div")
            .attr("class", "tooltip")
            .style("opacity", 0);

        // é¡¯ç¤ºé€šçŸ¥
        function showNotification(message, isSuccess = true) {
            const notification = document.createElement('div');
            notification.className = 'notification';
            notification.style.borderColor = isSuccess ? '#4ecdc4' : '#ff6b6b';
            notification.textContent = message;
            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // æ”¶è—å–®å­—åŠŸèƒ½
        function saveWord(wordData) {
            const basePath = getBasePath();
            fetch(`${basePath}/api/saved-words`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({ word: wordData })
            })
            .then(response => response.json())
            .then(data => {
                if (data.exists) {
                    showNotification('âš ï¸ å–®å­—å·²åœ¨æ”¶è—ä¸­', false);
                } else {
                    showNotification('âœ… å–®å­—å·²æ”¶è—ï¼');
                    // æ¨™è¨˜æ­¤ç¯€é»ç‚ºå·²æ”¶è—
                    markNodeAsSaved(wordData.korean);
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showNotification('âŒ æ”¶è—å¤±æ•—', false);
            });
        }

        // æ¨™è¨˜ç¯€é»ç‚ºå·²æ”¶è—
        function markNodeAsSaved(korean) {
            node.each(function(d) {
                if (d.korean === korean) {
                    const nodeGroup = d3.select(this);
                    // æª¢æŸ¥æ˜¯å¦å·²æœ‰æ¨™è¨˜
                    if (nodeGroup.select('.saved-indicator').empty()) {
                        nodeGroup.append('text')
                            .attr('class', 'saved-indicator')
                            .text('â­')
                            .attr('x', 20)
                            .attr('y', -20)
                            .attr('font-size', '16px')
                            .attr('pointer-events', 'none');
                    }
                }
            });
        }

        // è¼‰å…¥å·²æ”¶è—çš„å–®å­—ä¸¦æ¨™è¨˜
        (function() {
            const basePath = getBasePath();
            fetch(`${basePath}/api/saved-words`)
                .then(response => response.json())
                .then(data => {
                    const savedKoreans = data.words.map(w => w.korean);
                    savedKoreans.forEach(korean => {
                        markNodeAsSaved(korean);
                    });
                })
                .catch(error => console.error('Error loading saved words:', error));
        })();

        // ç¯€é»äº‹ä»¶
        node.on("mouseover", function(event, d) {
            tooltip.transition()
                .duration(200)
                .style("opacity", .9);
            tooltip.html(`
                <div class="korean">${d.korean}</div>
                <div class="chinese">${d.chinese}</div>
                <div class="definition"><strong>å®šç¾©:</strong> ${d.definition}</div>
                <div class="example"><strong>ä¾‹å¥:</strong> ${d.example_korean}</div>
                <div class="example"><strong>ç¿»è­¯:</strong> ${d.example_chinese}</div>
                <div style="margin-top: 10px; font-size: 10px; color: #4ecdc4;">ğŸ’¡ é›™æ“Šç¯€é»æ”¶è—å–®å­—</div>
            `)
                .style("left", (event.pageX + 10) + "px")
                .style("top", (event.pageY - 28) + "px");
        })
        .on("mouseout", function(d) {
            tooltip.transition()
                .duration(500)
                .style("opacity", 0);
        })
        .on("dblclick", function(event, d) {
            event.stopPropagation();
            saveWord({
                korean: d.korean,
                chinese: d.chinese,
                definition: d.definition,
                example_korean: d.example_korean,
                example_chinese: d.example_chinese
            });
        });

        // æ¨¡æ“¬æ›´æ–°
        simulation.on("tick", () => {
            link
                .attr("x1", d => d.source.x)
                .attr("y1", d => d.source.y)
                .attr("x2", d => d.target.x)
                .attr("y2", d => d.target.y);

            node
                .attr("transform", d => `translate(${d.x},${d.y})`);
        });

        // æ‹–æ‹½åŠŸèƒ½
        function dragstarted(event, d) {
            if (!event.active) simulation.alphaTarget(0.3).restart();
            d.fx = d.x;
            d.fy = d.y;
        }

        function dragged(event, d) {
            d.fx = event.x;
            d.fy = event.y;
        }

        function dragended(event, d) {
            if (!event.active) simulation.alphaTarget(0);
            d.fx = null;
            d.fy = null;
        }

        // æ§åˆ¶åŠŸèƒ½
        function restartSimulation() {
            simulation.alpha(1).restart();
        }

        function centerGraph() {
            const transform = d3.zoomIdentity.translate(width / 2, height / 2).scale(1);
            svg.transition().duration(750).call(zoom.transform, transform);
        }
    </script>
</body>
</html>
    